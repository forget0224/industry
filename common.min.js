var wW, wH, dW, dH, vW, vH, sH, sN, wT, cT, mF = !1,
    iconM, iconC, iconT, sceneM, sceneC, sceneT, sceneP, useM, useC, useT, useP, imageM, imageC, imageT, imageP;

function uaSetting() {
    var ua = navigator.userAgent;
    var up = navigator.platform;
    var uw = window.navigator.userAgent.toLowerCase();
    if (ua.indexOf('iPhone') > 0 || ua.indexOf('iPod') > 0 || ua.indexOf('Android') > 0 && ua.indexOf('Mobile') > 0) {
        $('body').addClass('sp');
        sH = 30
    } else if (ua.indexOf('iPad') > 0 || ua.indexOf('Android') > 0) {
        $('body').addClass('tb');
        sH = 60
    } else {
        $('body').addClass('pc');
        sH = 60
    }
    if (up.indexOf('Win') != -1) {
        $('body').addClass('win')
    } else {
        $('body').addClass('mac')
    }
    if (ua.indexOf('Android') > 0) {
        $('body').addClass('android')
    }
    if (uw.indexOf('msie') != -1 || uw.indexOf('trident') != -1) {
        $('body').addClass('ie')
    } else if (uw.indexOf('edge') != -1) {
        $('body').addClass('edge')
    } else if (uw.indexOf('chrome') != -1) {
        $('body').addClass('chrome')
    } else if (uw.indexOf('safari') != -1) {
        $('body').addClass('safari')
    } else if (uw.indexOf('firefox') != -1) {
        $('body').addClass('firefox')
    } else {}
}

function commonSetting() {
    wW = $(window).width();
    wH = $(window).height();
    if ($('.sp').length || $('.tb').length) {
        wH = window.innerHeight
    }
    $('.ww').css({
        'width': wW + 'px'
    });
    $('.wh').css({
        'height': wH + 'px'
    });
    if ($('.pc').length && wH < 600) {
        wH = 600
    }
    dW = $('.danikuru_frame svg').width();
    dH = $('.danikuru_frame svg').height();
    $('.front_icon').css({
        'top': wH / 2 - dH / 2 + 'px',
        'left': wW / 2 - dW / 2 + 'px'
    });
    $('.front_title').css({
        'width': (wW - dW) / 2 + 'px'
    });
    $('.front_copy').css({
        'width': (wW - dW) / 2 + 'px'
    });
    $('.front_caption').css({
        'top': wH / 2 + dH / 2 + 'px'
    });
    vW = $('.visual_link').width();
    vH = $('.visual_link').height()
}

function loadStart() {
    $('body').addClass('load_on wrap_off');
    if ($('body').hasClass('pc')) {
        var logTick = '🕷️';
        var logStyle = 'color:rgba(255,255,255,1); background-color:rgba(254,74,38,1);';
        for (let i = 0; i < 1000; i++) {
            logTick = logTick + '🕷️'
        }
        console.log(logTick + '%cダニクル®｜寝袋用ダニ捕りシート', logStyle)
    }
}

function loadEnd() {
    setTimeout(function () {
        $('body').removeClass('load_on');
        $('body').addClass('load_off');
        setTimeout(function () {
            setTimeout(function () {
                $('body').removeClass('wrap_off')
            }, 2000);
            iconAuto();
            sceneAuto();
            useAuto();
            imageAuto();
            scrollSetting()
        }, 2000)
    }, 2000)
}

function targetSetting(e) {
    e.preventDefault();
    if ($(this).attr('href').match(/#/i)) {
        var target = $(this.hash);
        target = target.length && target;
        if (target.length) {
            var targetOffset = target.offset().top - 0;
            $('html,body').animate({
                scrollTop: targetOffset
            }, 1000, 'easeInOutExpo')
        }
        if (mF == !0) {
            menuSetting()
        }
    }
}

function menuSetting() {
    if (mF == !1) {
        mF = !0;
        $('body').removeClass('menu_off');
        $('body').addClass('menu_on')
    } else {
        mF = !1;
        $('body').removeClass('menu_on');
        $('body').addClass('menu_off');
        $('.menu').delay(500).animate({
            scrollTop: 0
        }, '1')
    }
}

function pulldownSetting() {
    $(this).parents('.pulldown_list').find('.pulldown_bottom').stop().slideToggle(500, 'easeInOutExpo');
    if ($(this).parents('.pulldown_list').hasClass('pulldown_on') == !1) {
        $(this).parents('.pulldown_list').removeClass('pulldown_off');
        $(this).parents('.pulldown_list').addClass('pulldown_on')
    } else {
        $(this).parents('.pulldown_list').removeClass('pulldown_on');
        $(this).parents('.pulldown_list').addClass('pulldown_off')
    }
}

function visualCatch() {
    var vX = -0.15 * (event.offsetY - 0.5 * vH);
    var vY = 0.15 * (event.offsetX - 0.5 * vW);
    $('.visual_element').css({
        transform: 'rotateX(' + vX + 'deg) rotateY(' + vY + 'deg)'
    })
}

function visualRelease() {
    $('.visual_element').css({
        'transform': 'rotateX(0deg) rotateY(0deg)'
    })
}

function visualReset() {
    setTimeout(function () {
        if (wT == 0) {
            if ($('body').hasClass('change_visual') == !1 || $('body').hasClass('sheet_on') == !1 || $('body').hasClass('icon_on') == !1) {
                $('body').removeClass('change_visual change_image change_intro change_outro change_footer change_white change_orange change_beige frame_on frame_off sheet_on sheet_off package_on package_off trash_on trash_off hide_on hide_off icon_on icon_off');
                $('body').addClass('package_off change_visual sheet_on icon_on')
            }
        }
    }, 2000)
}

function iconSetting() {
    iconM = $('.front_icon').children('div').length;
    iconC = $('.front_icon').children('.icon_show').index() + 1;
    if (iconC < iconM) {
        iconC++
    } else {
        iconC = 1
    }
    $('.icon_hide').removeClass('icon_hide');
    $('.icon_show').addClass('icon_hide');
    $('.icon_show').removeClass('icon_show');
    $('.front_icon > div:nth-child(' + iconC + ')').addClass('icon_show')
}

function iconAuto() {
    iconSetting();
    iconStart()
}

function iconStart() {
    iconT = setInterval(iconSetting, 6000)
}

function sceneSetting() {
    if (sceneP) {
        sceneC = sceneP
    } else {
        sceneM = $('#scene .contents_slide').children('div').length;
        sceneC = $('#scene .contents_slide').children('.slide_on').index() + 1;
        if (sceneC < sceneM) {
            sceneC++
        } else {
            sceneC = 1
        }
    }
    $('#scene .slide_off').removeClass('slide_off');
    $('#scene .slide_on').addClass('slide_off');
    $('#scene .slide_on').removeClass('slide_on');
    $('#scene .contents_slide > div:nth-child(' + sceneC + ')').addClass('slide_on');
    $('#scene .pager_off').removeClass('pager_off');
    $('#scene .pager_on').addClass('pager_off');
    $('#scene .pager_on').removeClass('pager_on');
    $('#scene .contents_pager > div:nth-child(' + sceneC + ')').addClass('pager_on');
    $('#scene .slide_off').delay(1000).queue(function () {
        $('#scene .slide_off').removeClass('slide_off').dequeue()
    });
    sceneP = ''
}

function useSetting() {
    if (useP) {
        useCount = useP
    } else {
        useM = $('#use .contents_slide').children('div').length;
        useCount = $('#use .contents_slide').children('.slide_on').index() + 1;
        if (useCount < useM) {
            useCount++
        } else {
            useCount = 1
        }
    }
    $('#use .slide_off').removeClass('slide_off');
    $('#use .slide_on').addClass('slide_off');
    $('#use .slide_on').removeClass('slide_on');
    $('#use .contents_slide > div:nth-child(' + useCount + ')').addClass('slide_on');
    $('#use .pager_off').removeClass('pager_off');
    $('#use .pager_on').addClass('pager_off');
    $('#use .pager_on').removeClass('pager_on');
    $('#use .contents_pager > div:nth-child(' + useCount + ')').addClass('pager_on');
    $('#use .slide_off').delay(1000).queue(function () {
        $('#use .slide_off').removeClass('slide_off').dequeue()
    });
    useP = ''
}

function imageSetting() {
    if (imageP) {
        imageC = imageP
    } else {
        imageM = $('#image .contents_slide').children('div').length;
        imageC = $('#image .contents_slide').children('.slide_on').index() + 1;
        if (imageC < imageM) {
            imageC++
        } else {
            imageC = 1
        }
    }
    $('#image .slide_off').removeClass('slide_off');
    $('#image .slide_on').addClass('slide_off');
    $('#image .slide_on').removeClass('slide_on');
    $('#image .contents_slide > div:nth-child(' + imageC + ')').addClass('slide_on');
    $('#image .pager_off').removeClass('pager_off');
    $('#image .pager_on').addClass('pager_off');
    $('#image .pager_on').removeClass('pager_on');
    $('#image .contents_pager > div:nth-child(' + imageC + ')').addClass('pager_on');
    $('#image .slide_off').delay(1000).queue(function () {
        $('#image .slide_off').removeClass('slide_off').dequeue()
    });
    imageP = ''
}

function sceneStart() {
    sceneT = setInterval(sceneSetting, 6000)
}

function useStart() {
    useT = setInterval(useSetting, 6000)
}

function imageStart() {
    imageT = setInterval(imageSetting, 6000)
}

function sceneStop() {
    clearInterval(sceneT)
}

function useStop() {
    clearInterval(useT)
}

function imageStop() {
    clearInterval(imageT)
}

function sceneAuto() {
    sceneStart()
}

function useAuto() {
    useStart()
}

function imageAuto() {
    imageStart()
}

function sceneSelf() {
    sceneP = $(this).parent('div').index() + 1;
    sceneStop();
    sceneStart();
    sceneSetting()
}

function useSelf() {
    useP = $(this).parent('div').index() + 1;
    useStop();
    useStart();
    useSetting()
}

function imageSelf() {
    imageP = $(this).parent('div').index() + 1;
    imageStop();
    imageStart();
    imageSetting()
}

function scrollSetting() {
    wT = $(window).scrollTop();
    $('.load_off .scroll_element').each(function () {
        cT = $(this).offset().top;
        if (wT >= cT - wH + sH) {
            if ($(this).hasClass('scroll_off')) {
                if ($(this).hasClass('scroll_off1')) {
                    sN = 1
                } else if ($(this).hasClass('scroll_off2')) {
                    sN = 2
                } else if ($(this).hasClass('scroll_off3')) {
                    sN = 3
                } else {
                    sN = ''
                }
                $(this).removeClass('scroll_off scroll_off' + sN);
                $(this).addClass('scroll_on scroll_on' + sN);
                if ($(this).hasClass('contents_section') || $(this).hasClass('footer')) {
                    $('body').removeClass('change_visual change_image change_intro change_outro change_footer change_white change_orange change_beige frame_off sheet_off package_off trash_off hide_off icon_off');
                    if ($('body').hasClass('frame_on')) {
                        $('body').removeClass('frame_on');
                        $('body').addClass('frame_off')
                    }
                    if ($('body').hasClass('sheet_on')) {
                        $('body').removeClass('sheet_on');
                        $('body').addClass('sheet_off')
                    }
                    if ($('body').hasClass('package_on')) {
                        $('body').removeClass('package_on');
                        $('body').addClass('package_off')
                    }
                    if ($('body').hasClass('trash_on')) {
                        $('body').removeClass('trash_on');
                        $('body').addClass('trash_off')
                    }
                    if ($('body').hasClass('hide_on')) {
                        $('body').removeClass('hide_on');
                        $('body').addClass('hide_off')
                    }
                    if ($('body').hasClass('icon_on')) {
                        $('body').removeClass('icon_on');
                        $('body').addClass('icon_off')
                    }
                    if ($(this).hasClass('contents_visual')) {
                        $('body').removeClass('sheet_off icon_off');
                        $('body').addClass('change_visual sheet_on icon_on')
                    } else if ($(this).hasClass('contents_image')) {
                        $('body').removeClass('frame_off');
                        $('body').addClass('change_image frame_on')
                    } else if ($(this).hasClass('contents_intro')) {
                        $('body').removeClass('package_off');
                        $('body').addClass('change_intro package_on')
                    } else if ($(this).hasClass('contents_outro')) {
                        $('body').removeClass('trash_off');
                        $('body').addClass('change_outro trash_on')
                    } else if ($(this).hasClass('contents_footer')) {
                        $('body').removeClass('hide_off');
                        $('body').addClass('change_footer hide_on')
                    } else if ($(this).hasClass('contents_white')) {
                        $('body').removeClass('frame_off');
                        $('body').addClass('change_white frame_on')
                    } else if ($(this).hasClass('contents_orange')) {
                        $('body').removeClass('frame_off');
                        $('body').addClass('change_orange frame_on')
                    } else if ($(this).hasClass('contents_beige')) {
                        $('body').removeClass('frame_off');
                        $('body').addClass('change_beige frame_on')
                    }
                }
                if ($('body').hasClass('change_image')) {
                    if ($('.image_trigger').hasClass('scroll_on')) {
                        if ($('body').hasClass('icon_on') == !1) {
                            $('body').removeClass('icon_off');
                            $('body').addClass('icon_on')
                        }
                    } else {
                        if ($('body').hasClass('icon_on')) {
                            $('body').removeClass('icon_on');
                            $('body').addClass('icon_off')
                        }
                    }
                }
            }
        } else if (wT < cT - wH + sH) {
            if ($(this).hasClass('scroll_on')) {
                if ($(this).hasClass('scroll_on1')) {
                    sN = 1
                } else if ($(this).hasClass('scroll_on2')) {
                    sN = 2
                } else if ($(this).hasClass('scroll_on3')) {
                    sN = 3
                } else {
                    sN = ''
                }
                $(this).removeClass('scroll_on scroll_on' + sN);
                $(this).addClass('scroll_off scroll_off' + sN);
                if ($(this).hasClass('contents_section') || $(this).hasClass('footer')) {
                    $('body').removeClass('change_visual change_image change_intro change_outro change_footer change_white change_orange change_beige frame_off sheet_off package_off trash_off hide_off icon_off');
                    if ($('body').hasClass('frame_on')) {
                        $('body').removeClass('frame_on');
                        $('body').addClass('frame_off')
                    }
                    if ($('body').hasClass('sheet_on')) {
                        $('body').removeClass('sheet_on');
                        $('body').addClass('sheet_off')
                    }
                    if ($('body').hasClass('package_on')) {
                        $('body').removeClass('package_on');
                        $('body').addClass('package_off')
                    }
                    if ($('body').hasClass('trash_on')) {
                        $('body').removeClass('trash_on');
                        $('body').addClass('trash_off')
                    }
                    if ($('body').hasClass('hide_on')) {
                        $('body').removeClass('hide_on');
                        $('body').addClass('hide_off')
                    }
                    if ($('body').hasClass('icon_on')) {
                        $('body').removeClass('icon_on');
                        $('body').addClass('icon_off')
                    }
                    if ($(this).hasClass('contents_section')) {
                        if ($(this).prev('.contents_section').hasClass('contents_visual')) {
                            $('body').removeClass('sheet_off icon_off');
                            $('body').addClass('change_visual sheet_on icon_on')
                        } else if ($(this).prev('.contents_section').hasClass('contents_image')) {
                            $('body').removeClass('frame_off');
                            $('body').addClass('change_image frame_on')
                        } else if ($(this).prev('.contents_section').hasClass('contents_intro')) {
                            $('body').removeClass('package_off');
                            $('body').addClass('change_intro package_on')
                        } else if ($(this).prev('.contents_section').hasClass('contents_outro')) {
                            $('body').removeClass('trash_off');
                            $('body').addClass('change_outro trash_on')
                        } else if ($(this).prev('.contents_section').hasClass('contents_footer')) {
                            $('body').removeClass('hide_off');
                            $('body').addClass('change_footer hide_on')
                        } else if ($(this).prev('.contents_section').hasClass('contents_white')) {
                            $('body').removeClass('frame_off');
                            $('body').addClass('change_white frame_on')
                        } else if ($(this).prev('.contents_section').hasClass('contents_orange')) {
                            $('body').removeClass('frame_off');
                            $('body').addClass('change_orange frame_on')
                        } else if ($(this).prev('.contents_section').hasClass('contents_beige')) {
                            $('body').removeClass('frame_off');
                            $('body').addClass('change_beige frame_on')
                        }
                    } else {
                        if ($('.contents_inner > .contents_section:nth-last-child(1)').hasClass('contents_visual')) {
                            $('body').removeClass('sheet_off icon_off');
                            $('body').addClass('change_visual sheet_on icon_on')
                        } else if ($('.contents_inner > .contents_section:nth-last-child(1)').hasClass('contents_image')) {
                            $('body').removeClass('frame_off');
                            $('body').addClass('change_image frame_on')
                        } else if ($('.contents_inner > .contents_section:nth-last-child(1)').hasClass('contents_intro')) {
                            $('body').removeClass('package_off');
                            $('body').addClass('change_intro package_on')
                        } else if ($('.contents_inner > .contents_section:nth-last-child(1)').hasClass('contents_outro')) {
                            $('body').removeClass('trash_off');
                            $('body').addClass('change_outro trash_on')
                        } else if ($('.contents_inner > .contents_section:nth-last-child(1)').hasClass('contents_footer')) {
                            $('body').removeClass('hide_off');
                            $('body').addClass('change_footer hide_on')
                        } else if ($('.contents_inner > .contents_section:nth-last-child(1)').hasClass('contents_white')) {
                            $('body').removeClass('frame_off');
                            $('body').addClass('change_white frame_on')
                        } else if ($('.contents_inner > .contents_section:nth-last-child(1)').hasClass('contents_orange')) {
                            $('body').removeClass('frame_off');
                            $('body').addClass('change_orange frame_on')
                        } else if ($('.contents_inner > .contents_section:nth-last-child(1)').hasClass('contents_beige')) {
                            $('body').removeClass('frame_off');
                            $('body').addClass('change_beige frame_on')
                        }
                    }
                }
                if ($('body').hasClass('change_image')) {
                    if ($('.image_trigger').hasClass('scroll_on')) {
                        if ($('body').hasClass('icon_on') == !1) {
                            $('body').removeClass('icon_off');
                            $('body').addClass('icon_on')
                        }
                    } else {
                        if ($('body').hasClass('icon_on')) {
                            $('body').removeClass('icon_on');
                            $('body').addClass('icon_off')
                        }
                    }
                }
            }
        }
    });
    if ($('body').hasClass('load_off')) {
        if (wT > wH) {
            if ($('body').hasClass('header_on') == !1) {
                $('body').removeClass('header_off');
                $('body').addClass('header_on')
            }
        } else {
            if ($('body').hasClass('header_on')) {
                $('body').removeClass('header_on');
                $('body').addClass('header_off');
                $('body').delay(500).queue(function () {
                    $('body').addClass('header_top');
                    $('body').removeClass('header_off').dequeue()
                });
                $('html,body').animate({
                    scrollTop: 0
                }, 500)
            }
            if (mF == !0) {
                menuSetting()
            }
        }
    }
}
$(document).ready(function () {
    uaSetting();
    commonSetting();
    loadStart()
});
$(window).on('load', function () {
    $('html,body').animate({
        scrollTop: 0
    }, '1');
    commonSetting();
    loadEnd()
});
$(window).on('resize', commonSetting);
$(window).on('resize scroll', scrollSetting);
$(document).on('click', '.load_off .target_link', targetSetting);
$(document).on('click', '.load_off .menu_link', menuSetting);
$(document).on('click', '.load_off .pulldown_link', pulldownSetting);
$(document).on('click', '.load_off .top_link', visualReset);
$(document).on('mousemove', '.pc .visual_link', visualCatch);
$(document).on('mouseout', '.pc .visual_link', visualRelease);
$(document).on('click', '.load_off #scene .slide_link', sceneSelf);
$(document).on('click', '.load_off #use .slide_link', useSelf);
$(document).on('click', '.load_off #image .slide_link', imageSelf)